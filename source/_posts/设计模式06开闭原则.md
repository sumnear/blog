---
title: 设计模式06开闭原则
date: 2018-12-20 14:38:05
tags: [设计模式,六大原则]
categories: 设计模式
---


## 开闭原则  Open Close Principle  

Software entities like classes,modules and functions should be open for exension but closed for modifications.  
一个软件实体如类，模块和函数应该对扩展开放，对修改关闭。  

keep the bar green to keep the code clean  

1、开闭原则对测试的影响  
业务逻辑要保证测试到;边界条件要测试到;异常要测试到  

2、开闭原则可以提高复用性  
  
3、开闭原则可以提高可维护性  

4、面向对象开发的要求  
万物皆对象，我们需要把所有的事物都抽象成对象，然后针对对象进行操作，但是万物皆运动，有运动就有变化，有变化就要有策略去应对，怎么快速应对呢？这就要需要在设计之初考虑到所有可能变化的因素，然后留下接口，等待“可能”转变为“现实”。


1、抽象约束  
抽象是对一组事物的通用描述，没有具体的实现，也就表示它可以有非常多的可能性，可以跟随需求的变化而变化。因此，通过接口或抽象类可以约束一组可能变化的行为，并且能够实现对扩展开放，其包含三层含义：第一，通过接口或抽象类约束扩展，对扩展进行边界限定，不允许出现在接口或抽象类中不存在的public方法；第二，参数类型、引用对象尽量使用接口或者抽象类，而不是实现类；第三，抽象层尽量保持稳定，一旦确定即不允许修改。  

2、元数据metadata控制模块行为  
达到极致的就是 spring的 控制反转 Inversion of Control 。通过扩展一个子类，修改配置文件，完成了业务变化。  

3、制定项目章程  

4、封装变化  
对变化的封装包含两层含义：第一，将相同的变化封装到一个接口或抽象类中；第二，将不同的变化封装到不同的接口或抽象类中，不应该有两个不同的变化出现在同一个接口或抽象类中。封装变化，也就是受保护的变化（protexted variations），找出预计有变化或不稳定的点，我们为这些变化点创建稳定的接口，准确地讲是封装可能发生的变化，23个设计模式都是从各个不同的角度对变化进行封装的。  

开闭原则只是精神口号，实现拥抱变化的方法非常多，并不局限于这6大设计原则，但是遵循这6大设计原则基本上可以应对大多数变化。开闭原则是一个终极目标，朝着这个方向努力，可以非常显著的改善一个系统的架构，真正做到“拥抱变化”。
